{% extends 'inloggen/selectieIndexPage.html.twig' %}

{% block inlogNavigation %}
    <div id="inlog_nav">
        <div id="text">
            <a href="{{ path('getSelectieIndexPage') }}">Index</a>
            > <i>{{ persoonItems.voornaam }} {{ persoonItems.achternaam }}</i>
        </div>
    </div>
{% endblock %}

{% block pageHeader %}

    <a href="http://www.facebook.com/groups/selectieleidschendam/" target="blank">Word lid van de Facebookgroep van
        de selectie Leidschendam!</a>

    <div style="height: 175px;">
        <a href="{{ path('addSelectieFotoPage', { 'persoonId': persoonItems.id }) }}">
            <img src="http://www.donargym.nl/uploads/selectiefotos/{{ persoonItems.foto }}"
                 width="150"
                 style="float:right;margin-right:2px;margin-top:5px;"/>
        </a>
        <br>

        <h1>{{ persoonItems.voornaam }} {{ persoonItems.achternaam }}
        </h1>

        <p><b>Geboortedatum:</b> {{ persoonItems.geboortedatum }}<br>
            <b>Categorie:</b> {{ persoonItems.categorie }}</p></div>
{% endblock %}

{% block body %}
    {% for functie in persoonItems.functies %}
        <div style="margin-bottom: 75px;"><h2>{{ functie.groepNaam }} ({{ functie.functie }})</h2>
            <hr>

            {#{% if functie.functie == 'Turnster' %}
                <center>
                    <table>
                        <tr>
                            <td style="padding-right: 5px">
                                <center>
                                    <a href="">
                                        <img src="http://www.donargym.nl/images/voortgang.jpg"
                                             width="290"/><br>
                                        Voortgang jaardoelen
                                    </a>
                                </center>
                            </td>
                            <td style="padding-left: 5px">
                                <center>
                                    <a href="">
                                        <img src="http://www.donargym.nl/images/voortgang.jpg"
                                             width="290"/><br>
                                        Globale voortgang
                                    </a>
                                </center>
                            </td>
                        </tr>
                    </table>
                </center>
            {% endif %}#}
            {% if (functie.functie == 'Trainer') or (functie.functie == 'Assistent-Trainer') %}
                <h3>Turnsters
                {% if functie.functie == 'Trainer' %}
                    <a href="{{ path('addSelectieTurnsterPage', { 'id': persoonItems.id, 'groepsId': functie.groepId }) }}"><img src="{{ asset('images/add.png') }}" width="18px" /></a>
                {% endif %}
                </h3>
                <table border="1">
                    <tr style="font-weight: bold">
                        <td>Naam</td><td>Geboortedatum</td><td>Voortgang</td><td>% aanwezig</td>
                        {% if functie.functie == 'Trainer' %}
                            <td></td><td></td>
                        {% endif %}
                    </tr>
                    {% for turnster in functie.turnster %}
                        <tr>
                            <td>
                                <a href="">
                                    {{ turnster.voornaam }} {{ turnster.achternaam }}
                                </a>
                            </td>
                            <td>
                                <a href="">
                                    {{ turnster.geboortedatum }}
                                </a>
                            </td>
                            <td>
                                <a href="">

                                </a>
                            </td>
                            <td>
                                <a href="">

                                </a>
                            </td>
                            {% if functie.functie == 'Trainer' %}
                                <td>
                                    <a href="">
                                        <img src="{{ asset('images/edit.png') }}" width="18px"/>
                                    </a>
                                </td>
                                <td>
                                    <a href="{{ path('removeSelectieTurnsterPage', { 'trainerId': persoonItems.id, 'turnsterId': turnster.id }) }}">
                                        <img src="{{ asset('images/remove.png') }}" width="18px"/>
                                    </a>
                                </td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
            <h3>Presentie</h3>
            {% set trainingcount = 0 %}
            {% set percentageAanwezig = 0 %}
            {% for training in persoonItems.trainingen %}
                {% if training.groepId == functie.groepId %}
                    {% set trainingcount = trainingcount + 1 %}
                    {% set percentageAanwezig = percentageAanwezig + training.percentageAanwezig %}
                    <p><h4>{{ training.dag }}: {{ training.tijdVan }} - {{ training.tijdTot }}</h4>
                    <table border="1">
                        <tr>
                            {% for trainingsdatum in training.trainingsdata %}
                                <td style="font-size: 13px;">{{ trainingsdatum.lesdatum }}</td>
                            {% endfor %}
                            <td style="font-size: 13px;"><b>% Aanwezig</b></td>
                        </tr>
                        <tr>
                            {% for trainingsdatum in training.trainingsdata %}
                                <td style="text-align: center;
                                {% if trainingsdatum.aanwezigheid == 'A' or trainingsdatum.aanwezigheid == '-' %}
                                        background-color: yellow; color: red; font-weight: bold;
                                        {% endif %}
                                    ">{{ trainingsdatum.aanwezigheid }}</td>
                            {% endfor %}
                            <td style="text-align:center; font-weight: bold; background-color: #{{ training.percentageKleur }};">{{ training.percentageAanwezig |round }}%</td>
                        </tr>
                    </table>
                {% endif %}
            {% endfor %}
            {% if trainingcount > 0 %}
                <p>Totaal % aanwezig: <span style="font-weight: bold; background-color: #{{ functie.percentageKleur }};">{{ functie.percentageAanwezig | round }}%</span></p>
            {% endif %}
            <p><a href="">Afmelden voor trainingen</a></p>

            <p>
                <table>
                {% for test in persoonItems.test %}
                    <tr>
                        <td style="background-color: #{{ test.color }}">
                            {{ test.percentage }}
                        </td>
                    </tr>
                {% endfor %}
                </table>
            </p>

            {% if (functie.functie == 'Trainer') or (functie.functie == 'Assistent-Trainer') %}
                {#<a href="">Wedstrijduitslagen</a><br>#}
            {% endif %}

            {% if (functie.functie == 'Trainer') or (functie.functie == 'Assistent-Trainer') %}
                {#<a href="">Doelen</a><br>#}
            {% endif %}

            {#<a href="">Adreslijst</a><br>#}
            {#<a href="">Stukje</a><br>#}
        </div>
    {% endfor %}
{% endblock %}